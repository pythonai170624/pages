
# 🌳 חישוב Gini Impurity בעץ החלטה — דוגמה מלאה

נניח שיש לנו מערכת נתונים פשוטה עם שני מאפיינים (X1, X2) וקטגוריה יעד (Y) כפי שמוצג בטבלה:

| X1 | X2 | Y |
|----|----|----|
| 1  | 3  | A |
| 2  | 1  | A |
| 3  | 2  | B |
| 4  | 3  | B |
| 5  | 1  | A |
| 6  | 2  | B |

---

## 🔹 חישוב Gini של השורש (Root)

סופרים כמה מכל קטגוריה:

- A: 3 דגימות → $$ p_A = \frac{3}{6} $$
- B: 3 דגימות → $$ p_B = \frac{3}{6} $$

נחשב Gini impurity בשורש:

$$
G(root) = 1 - (0.5^2 + 0.5^2) = 1 - (0.25 + 0.25) = 0.5
$$

---

## ✂️ נבחן פיצול לפי X1 <= 3

### קבוצה שמאלית (X1 <= 3):

- דגימות: (1,A), (2,A), (3,B)  
- A: 2 מתוך 3 → $$ p_A = \frac{2}{3}, p_B = \frac{1}{3} $$

$$
G(left) = 1 - \left(\left(\frac{2}{3}\right)^2 + \left(\frac{1}{3}\right)^2\right) = 1 - \left(\frac{4}{9} + \frac{1}{9}\right) = 1 - \frac{5}{9} = \frac{4}{9} \approx 0.44
$$

### קבוצה ימנית (X1 > 3):

- דגימות: (4,B), (5,A), (6,B)  
- A: 1 מתוך 3 → $$ p_A = \frac{1}{3}, p_B = \frac{2}{3} $$

$$
G(right) = 1 - \left(\left(\frac{1}{3}\right)^2 + \left(\frac{2}{3}\right)^2\right) = 1 - \left(\frac{1}{9} + \frac{4}{9}\right) = 1 - \frac{5}{9} = \frac{4}{9} \approx 0.44
$$

### חישוב Gini הכולל לאחר הפיצול:

$$
G_{weighted} = \frac{3}{6} \cdot 0.44 + \frac{3}{6} \cdot 0.44 = 0.44
$$

### רווח (Gain) מהפיצול:

$$
Gain = G(root) - G_{weighted} = 0.5 - 0.44 = 0.06
$$

---

## ✂️ נבחן פיצול לפי X2 <= 2

### קבוצה שמאלית (X2 <= 2):

- דגימות: (2,A), (3,B), (5,A), (6,B)  
- A: 2, B: 2 → $$ p_A = p_B = 0.5 $$

$$
G(left) = 1 - (0.5^2 + 0.5^2) = 0.5
$$

### קבוצה ימנית (X2 > 2):

- דגימות: (1,A), (4,B)  
- A: 1, B: 1 → $$ p_A = p_B = 0.5 $$

$$
G(right) = 0.5
$$

### Gini משוקלל:

$$
G_{weighted} = \frac{4}{6} \cdot 0.5 + \frac{2}{6} \cdot 0.5 = 0.5
$$

### רווח:

$$
Gain = 0.5 - 0.5 = 0
$$

---

## ✅ מסקנה:

- הפיצול לפי **X1** מפחית את Gini ל-0.44 → רווח (Gain) של **0.06**
- הפיצול לפי **X2** לא משפר את Gini כלל

🔮 לכן עדיף לפצל לפי **X1 ≤ 3**

---

💃 ולגבי הטנגו... אם ה-GINI יורד — אנחנו רוקדים את ריקוד ההחלטות כמו מקצוענים 🕺❤️
